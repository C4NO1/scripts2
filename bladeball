-- การเข้าถึง UI
local button = script.Parent
local uiEnabled = true  -- สถานะของ UI
local fpsLabel = script.Parent.Parent:FindFirstChild("TextLabel")

-- ฟังก์ชันในการเปิด/ปิดฟังก์ชันการลดแลค
local function toggleLagReduction()
    if uiEnabled then
        -- ปิดฟังก์ชันลดแลค
        game:GetService("Workspace").StreamingEnabled = false
        game:GetService("Workspace").ReduceRendering = false
        -- เพิ่มความละเอียด
        game:GetService("Workspace").Terrain.WaterTransparency = 0
        game:GetService("Workspace").Terrain.WaterReflectance = 0
        -- ปิดการแสดง FPS
        fpsLabel.Visible = false
    else
        -- เปิดฟังก์ชันลดแลค
        game:GetService("Workspace").StreamingEnabled = true
        game:GetService("Workspace").ReduceRendering = true
        -- ลดความละเอียด
        game:GetService("Workspace").Terrain.WaterTransparency = 0.5
        game:GetService("Workspace").Terrain.WaterReflectance = 0.5
        -- แสดง FPS
        fpsLabel.Visible = true
    end
    uiEnabled = not uiEnabled
    button.Text = uiEnabled and "Disable Lag Reduction" or "Enable Lag Reduction"
end

-- ตั้งค่าให้ปุ่มทำงานเมื่อคลิก
button.MouseButton1Click:Connect(toggleLagReduction)

-- การแสดง FPS
local function updateFPS()
    while true do
        local fps = math.floor(1 / game:GetService("RunService").RenderStepped:Wait())
        fpsLabel.Text = "FPS: " .. fps
    end
end

-- เริ่มต้นการแสดง FPS
updateFPS()
